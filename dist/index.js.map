{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component, Fragment } from 'react';\nimport { Upload, Modal, message } from 'antd';\nimport PropTypes from 'prop-types';\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\n\nimport './index.less'\ntry {\n  new File([], '');\n} catch (e) {\n  // 兼容 IE new File()\n  // import('canvas-toBlob').then(() => {\n  //   /* eslint-disable-next-line */\n  //   File = class File extends Blob {\n  //     constructor(chunks, filename, opts = {}) {\n  //       super(chunks, opts);\n  //       this.lastModifiedDate = new Date();\n  //       this.lastModified = +this.lastModifiedDate;\n  //       this.name = filename;\n  //     }\n  //   };\n  // });\n}\n\nconst { Dragger } = Upload;\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n}\n\nfunction start(tasks) {\n  var result = []\n  return tasks.reduce((accumulator, item, index) => {\n    return accumulator.then(res => {\n      return item.then(res => {\n        result[index] = res\n        return index == tasks.length - 1 ? result : item\n      })\n    })\n  }, Promise.resolve())\n}\n\n// limit: 限制单次最多上传数量，nzMultiple 打开时有效；0 表示不限\n// size: 限制文件大小，单位：KB；0 表示不限\n// fileType: 限制文件类型，例如：image/png,image/jpeg,image/gif,image/bmp\n// filter: 自定义过滤器\n// showButton 是否展示上传按钮\n\nexport default class Uploader extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      // 预览\n      previewVisible: false,\n      previewImage: '',\n      // 正常数据\n      fileList: props.value || [],\n      showButton: true,\n      //\n      cropModalVisible: false,\n      cropImageSrc: null,\n      cropData: {}\n    }\n\n    this.uploadRef = React.createRef();\n\n    this.imageCount = 0;\n    this.filters = [];\n    if (props.fileType) {\n      this.filters.push({\n        name: 'type',\n        fn: fileList => {\n          if (props.fileType.length === 0) {\n            return fileList;\n          }\n          let types = props.fileType.split(',');\n          let filterFiles = fileList.filter(f => types.indexOf(f.type) > -1);\n\n          if (filterFiles.length !== fileList.length) {\n            message.error('文件格式不在 fileType 值中')\n            return false;\n          }\n\n          return fileList;\n        }\n      })\n    }\n\n    if (props.size) {\n      this.filters.push({\n        name: 'size',\n        fn: fileList => {\n          if (props.size === 0) {\n            return fileList;\n          }\n\n          let filterFiles = fileList.filter(f => f.size <= props.size);\n\n          if (filterFiles.length !== fileList.length) {\n            message.error('文件超出限定 size 值')\n            return false;\n          }\n\n          return fileList;\n        }\n      })\n    }\n\n    const { minWidth = 0, minHeight = 0, maxWidth = 0, maxHeight = 0 } = props;\n    if (maxWidth || maxHeight || minWidth || minHeight) {\n      this.filters.push({\n        name: 'check width height',\n        fn: (fileList) => {\n          return new Promise((resolve, reject) => {\n            let filereader = new FileReader();\n            filereader.onload = e => {\n              let src = e.target.result;\n              const image = new Image();\n              image.onload = function () {\n                const { naturalWidth, naturalHeight } = this;\n\n                if ((maxWidth != 0 && naturalWidth > maxWidth)\n                  || (minWidth != 0 && naturalWidth < minWidth)\n                  || (maxHeight != 0 && naturalHeight > maxHeight)\n                  || (minHeight != 0 && naturalHeight < minHeight)) {\n                  message.error('文件宽高超不符合要求')\n                  reject()\n                } else {\n                  resolve();\n                }\n              };\n              image.onerror = reject;\n              image.src = src;\n            };\n            filereader.readAsDataURL(fileList[0]);\n          })\n        }\n      })\n    }\n\n    this.filters.push(...(props.filter || []))\n  }\n\n  handleCancelPreview = () => this.setState({ previewVisible: false });\n  handlePreview = async file => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj);\n    }\n\n    this.setState({\n      previewImage: file.url || file.preview,\n      previewVisible: true,\n    });\n  };\n\n  //\n  onCropOk = async () => {\n    const { cropData } = this.state;\n    let { x, y, width, height } = cropData;\n\n    if (!width || !height) {\n      this.onClose();\n      return;\n    }\n\n    if (this.scale !== undefined) {\n      x = x * this.scale;\n      y = y * this.scale;\n      width = width * this.scale;\n      height = height * this.scale;\n    }\n\n    // 获取裁切后的图片\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(this.imageRef, x, y, width, height, 0, 0, width, height);\n\n    const { name, type, uid } = this.originalFile;\n    canvas.toBlob(async (blob) => {\n      // 生成新图片\n      const croppedFile = new File([blob], name, { type, lastModified: Date.now() });\n      croppedFile.uid = uid;\n\n      // 关闭弹窗\n      this.onCropClose();\n\n      const { beforeUpload = () => true } = this.props;\n      // 调用 beforeUpload\n      const response = beforeUpload(croppedFile, [croppedFile]);\n\n      if (response === false) {\n        this.reject();\n        return;\n      }\n\n      if (typeof response.then !== 'function') {\n        this.resolve(croppedFile);\n        return;\n      }\n\n      try {\n        const croppedProcessedFile = await response;\n        const fileType = Object.prototype.toString.call(croppedProcessedFile);\n        const useProcessedFile = fileType === '[object File]' || fileType === '[object Blob]';\n\n        this.resolve(useProcessedFile ? croppedProcessedFile : croppedFile);\n      } catch (err) {\n        this.reject(err);\n      }\n    }, type);\n  }\n\n  onCropClose = () => {\n    this.imageRef = undefined;\n    this.scale = undefined;\n\n    this.setState({\n      cropModalVisible: false,\n      cropData: {}\n    })\n  }\n\n  onCropChange = (cropData) => {\n    this.setState({ cropData })\n  }\n\n  onCropImageLoaded = (image) => {\n    if (this.imageRef !== undefined) return;\n\n    this.imageRef = image;\n    const { naturalWidth, naturalHeight } = this.imageRef;\n    let imgWidth = naturalWidth;\n    let imgHeight = naturalHeight;\n\n    const { cropModalWidth, cropWidth, cropHeight, useRatio } = this.props;\n\n    const modalBodyWidth = cropModalWidth - 24 * 2;\n    if (naturalWidth > modalBodyWidth) {\n      imgWidth = modalBodyWidth;\n      this.scale = naturalWidth / imgWidth;\n      imgHeight = naturalHeight / this.scale;\n    }\n\n    const aspect = cropWidth / cropHeight;\n    let x;\n    let y;\n    let width;\n    let height;\n\n    if (useRatio === true) {\n      const naturalAspect = naturalWidth / naturalHeight;\n      if (naturalAspect > aspect) {\n        y = 0;\n        height = imgHeight;\n        width = height * aspect;\n        x = (imgWidth - width) / 2;\n      } else {\n        x = 0;\n        width = imgWidth;\n        height = width / aspect;\n        y = (imgHeight - height) / 2;\n      }\n    } else {\n      x = (imgWidth - cropWidth) / 2;\n      y = (imgHeight - cropHeight) / 2;\n      width = cropWidth;\n      height = cropHeight;\n    }\n\n    this.setState({ cropData: { unit: 'px', aspect, x, y, width, height } });\n    return false;\n  }\n\n  render() {\n    const { filters } = this;\n    const {\n      previewVisible,\n      previewImage,\n      //\n      fileList,\n      showButton = true,\n      //\n      cropModalVisible, cropImageSrc, cropData\n    } = this.state;\n    const {\n      children,\n      max = 0,\n      filter,\n      onChange,\n      beforeUpload,\n      onRemove,\n      // crop\n      cropModalTitle, cropModalWidth, cropResize, cropResizeAndDrag,\n      ...uploadProp\n    } = this.props;\n\n    return <Fragment>\n      <Upload\n        ref={this.uploadRef}\n        fileList={fileList}\n        onChange={({ fileList }) => {\n          let needShowButton = true;\n          if (max == 0 || fileList.length < max) {\n            needShowButton = true;\n          } else {\n            needShowButton = false;\n          }\n          if (max !== 0) {\n            fileList.splice(max);\n          }\n\n          onChange && onChange(fileList)\n          this.setState({\n            fileList: fileList,\n            showButton: needShowButton\n          })\n        }}\n        beforeUpload={(file, fileList) => {\n          return new Promise((resolve, reject) => {\n\n            this.resolve = resolve;\n            this.reject = reject;\n\n            this.imageCount++;\n            let tasks = [];\n            for (let i = 0, len = filters.length; i < len; i++) {\n              let f = filters[i];\n              let r = f.fn([file]);\n\n              if (r instanceof Promise) {\n                tasks.push(r);\n              } else if (!!r === false) {\n                tasks.push(Promise.reject())\n              } else {\n                tasks.push(Promise.resolve())\n              }\n            }\n\n            Promise.all(tasks).then(() => {\n              // 进行剪切控制\n              const { enCrop = false } = this.props;\n              if (enCrop) {\n                this.originalFile = file;\n                // 读取添加的图片\n                const reader = new FileReader();\n                reader.addEventListener('load', () => {\n                  this.setState({\n                    cropModalVisible: true,\n                    cropImageSrc: reader.result,\n                  });\n                });\n                reader.readAsDataURL(this.originalFile);\n              } else {\n                this.resolve()\n              }\n            })\n\n\n          })\n\n        }}\n        onRemove={(file) => {\n          this.imageCount--;\n          onChange && onChange(this.state.fileList)\n          return true;\n        }}\n        onPreview={this.handlePreview}\n        {...uploadProp}\n      >\n        {showButton && children}\n      </Upload>\n      <Modal\n        visible={cropModalVisible}\n        width={cropModalWidth}\n        onOk={this.onCropOk}\n        onCancel={this.onCropClose}\n        wrapClassName=\"antd-img-crop-modal\"\n        title={cropModalTitle || '编辑图片'}\n        maskClosable={false}\n        destroyOnClose\n      >\n        {cropImageSrc && (\n          <ReactCrop\n            src={cropImageSrc}\n            crop={cropData}\n            locked={cropResize === false}\n            disabled={cropResizeAndDrag === false}\n            onImageLoaded={this.onCropImageLoaded}\n            onChange={this.onCropChange}\n            keepSelection\n          />\n        )}\n      </Modal>\n      <Modal visible={previewVisible} footer={null} onCancel={this.handleCancelPreview}>\n        <img alt=\"预览图片\" style={{ width: '100%' }} src={previewImage} />\n      </Modal>\n    </Fragment>\n  }\n}\n\n\nUploader.propTypes = {\n  //\n  fileType: PropTypes.string,\n  size: PropTypes.number,\n  max: PropTypes.number,\n  minWidth: PropTypes.number,\n  minHeight: PropTypes.number,\n  maxWidth: PropTypes.number,\n  maxHeight: PropTypes.number,\n  enCrop: PropTypes.bool,\n  filter: PropTypes.array,\n\n  //crop\n  cropWidth: PropTypes.number,\n  cropHeight: PropTypes.number,\n  useRatio: PropTypes.bool,\n  cropResize: PropTypes.bool,\n  cropResizeAndDrag: PropTypes.bool,\n\n  cropModalTitle: PropTypes.string,\n  cropModalWidth: PropTypes.number,\n  beforeCrop: PropTypes.func,\n\n  children: PropTypes.node,\n};\n\nUploader.defaultProps = {\n  //\n  fileType: '',\n  size: 0,\n  max: 0,\n  minWidth: 0,\n  minHeight: 0,\n  maxWidth: 0,\n  maxHeight: 0,\n  enCrop: false,\n  filter: [],\n  // crop\n  cropWidth: 100,\n  cropHeight: 100,\n  useRatio: false,\n  cropResize: true,\n  cropResizeAndDrag: true,\n\n  cropModalTitle: '图片裁剪',\n  cropModalWidth: 520,\n};"],"names":["style","File","e","Dragger","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","Uploader","props","handleCancelPreview","setState","previewVisible","handlePreview","url","preview","originFileObj","onCropOk","state","cropData","x","y","width","height","onClose","scale","undefined","document","createElement","canvas","getContext","drawImage","imageRef","originalFile","name","type","uid","toBlob","blob","lastModified","Date","now","onCropClose","beforeUpload","croppedFile","response","then","Object","prototype","toString","call","croppedProcessedFile","fileType","useProcessedFile","onCropChange","onCropImageLoaded","image","naturalWidth","naturalHeight","imgWidth","imgHeight","cropModalWidth","cropWidth","cropHeight","useRatio","modalBodyWidth","aspect","naturalAspect","unit","value","uploadRef","React","createRef","imageCount","filters","push","length","fileList","types","split","filterFiles","filter","indexOf","f","size","minWidth","minHeight","maxWidth","maxHeight","filereader","src","target","Image","previewImage","showButton","cropModalVisible","cropImageSrc","children","max","onChange","onRemove","cropModalTitle","cropResize","cropResizeAndDrag","uploadProp","needShowButton","splice","tasks","i","len","r","fn","all","enCrop","addEventListener","Component","propTypes","PropTypes","string","number","bool","array","func","node","defaultProps"],"mappings":"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"}