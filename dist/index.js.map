{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component, Fragment } from \"react\";\nimport { Upload, Modal, message } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport ReactCrop from \"react-image-crop\";\nimport \"react-image-crop/dist/ReactCrop.css\";\n\nimport \"./index.less\";\ntry {\n  new File([], \"\");\n} catch (e) {\n  // 兼容 IE new File()\n  // import('canvas-toBlob').then(() => {\n  //   /* eslint-disable-next-line */\n  //   File = class File extends Blob {\n  //     constructor(chunks, filename, opts = {}) {\n  //       super(chunks, opts);\n  //       this.lastModifiedDate = new Date();\n  //       this.lastModified = +this.lastModifiedDate;\n  //       this.name = filename;\n  //     }\n  //   };\n  // });\n}\n\nconst { Dragger } = Upload;\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n  });\n}\n\n// limit: 限制单次最多上传数量，nzMultiple 打开时有效；0 表示不限\n// size: 限制文件大小，单位：KB；0 表示不限\n// fileType: 限制文件类型，例如：image/png,image/jpeg,image/gif,image/bmp\n// filter: 自定义过滤器\n// showButton 是否展示上传按钮\n\nexport default class Uploader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // 预览\n      previewVisible: false,\n      previewImage: \"\",\n      // 正常数据\n      fileList: props.value || [],\n      showButton: true,\n      //\n      cropModalVisible: false,\n      cropImageSrc: null,\n      cropData: {}\n    };\n\n    this.uploadRef = React.createRef();\n\n    this.imageCount = 0;\n    this.filters = [];\n    const { fileType, fileTypeErrorTip = \"不支持该文件格式\" } = props;\n    if (fileType) {\n      this.filters.push({\n        name: \"type\",\n        fn: fileList => {\n          if (fileType.length === 0) {\n            return true;\n          }\n          let types = fileType.split(\",\");\n          let filterFiles = fileList.filter(f => types.indexOf(f.type) > -1);\n\n          if (filterFiles.length !== fileList.length) {\n            message.error(fileTypeErrorTip);\n            return false;\n          }\n\n          return true;\n        }\n      });\n    }\n\n    const { enCrop = false, size, sizeErrorTip = \"文件超出限定值\" } = props;\n\n    if (size && enCrop === false) {\n      this.filters.push({\n        name: \"size\",\n        fn: fileList => {\n          if (size === 0) {\n            return true;\n          }\n\n          let filterFiles = fileList.filter(f => f.size <= size);\n\n          if (filterFiles.length !== fileList.length) {\n            message.error(sizeErrorTip);\n            return false;\n          }\n\n          return true;\n        }\n      });\n    }\n\n    const {\n      minWidth = 0,\n      minHeight = 0,\n      maxWidth = 0,\n      maxHeight = 0,\n      whErrorTip = \"文件宽高超不符合要求\"\n    } = props;\n    if ((maxWidth || maxHeight || minWidth || minHeight) && enCrop === false) {\n      this.filters.push({\n        name: \"check width height\",\n        fn: fileList => {\n          return new Promise((resolve, reject) => {\n            let filereader = new FileReader();\n            filereader.onload = e => {\n              let src = e.target.result;\n              const image = new Image();\n              image.onload = function () {\n                const { naturalWidth, naturalHeight } = this;\n\n                if (\n                  (maxWidth !== 0 && naturalWidth > maxWidth) ||\n                  (minWidth !== 0 && naturalWidth < minWidth) ||\n                  (maxHeight !== 0 && naturalHeight > maxHeight) ||\n                  (minHeight !== 0 && naturalHeight < minHeight)\n                ) {\n                  message.error(whErrorTip);\n                  reject();\n                } else {\n                  resolve();\n                }\n              };\n              image.onerror = reject;\n              image.src = src;\n            };\n            filereader.readAsDataURL(fileList[0]);\n          });\n        }\n      });\n    }\n\n    this.filters.push(...(props.filter || []));\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      // doSomething\n      this.setState({\n        fileList: nextProps.value\n      })\n    }\n  }\n\n  handleCancelPreview = () => this.setState({ previewVisible: false });\n  handlePreview = async file => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj);\n    }\n\n    this.setState({\n      previewImage: file.url || file.preview,\n      previewVisible: true\n    });\n  };\n\n  //\n  onCropOk = async () => {\n    const { cropData } = this.state;\n    let { x, y, width, height } = cropData;\n\n    if (!width || !height) {\n      this.onClose();\n      return;\n    }\n\n    if (this.scale !== undefined) {\n      x = x * this.scale;\n      y = y * this.scale;\n      width = width * this.scale;\n      height = height * this.scale;\n    }\n\n    // 获取裁切后的图片\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(this.imageRef, x, y, width, height, 0, 0, width, height);\n\n    const { name, type, uid } = this.originalFile;\n    canvas.toBlob(async blob => {\n      // 生成新图片\n      const croppedFile = new File([blob], name, {\n        type,\n        lastModified: Date.now()\n      });\n      croppedFile.uid = uid;\n\n      // 关闭弹窗\n      this.onCropClose();\n\n      const { beforeUpload = () => true } = this.props;\n      // 调用 beforeUpload\n      const response = beforeUpload(croppedFile, [croppedFile]);\n\n      if (response === false) {\n        this.reject();\n        return;\n      }\n\n      if (typeof response.then !== \"function\") {\n        this.resolve(croppedFile);\n        return;\n      }\n\n      try {\n        const croppedProcessedFile = await response;\n        const fileType = Object.prototype.toString.call(croppedProcessedFile);\n        const useProcessedFile =\n          fileType === \"[object File]\" || fileType === \"[object Blob]\";\n\n        this.resolve(useProcessedFile ? croppedProcessedFile : croppedFile);\n      } catch (err) {\n        this.reject(err);\n      }\n    }, type);\n  };\n\n  onCropClose = () => {\n    this.imageRef = undefined;\n    this.scale = undefined;\n\n    this.setState({\n      cropModalVisible: false,\n      cropData: {}\n    });\n  };\n\n  onCropChange = cropData => {\n    this.setState({ cropData });\n  };\n\n  onCropImageLoaded = image => {\n    if (this.imageRef !== undefined) return;\n\n    this.imageRef = image;\n    const { naturalWidth, naturalHeight } = this.imageRef;\n    let imgWidth = naturalWidth;\n    let imgHeight = naturalHeight;\n\n    const { cropModalWidth, cropWidth, cropHeight, useRatio } = this.props;\n\n    const modalBodyWidth = cropModalWidth - 24 * 2;\n    if (naturalWidth > modalBodyWidth) {\n      imgWidth = modalBodyWidth;\n      this.scale = naturalWidth / imgWidth;\n      imgHeight = naturalHeight / this.scale;\n    }\n\n    const aspect = cropWidth / cropHeight;\n    let x;\n    let y;\n    let width;\n    let height;\n\n    if (useRatio === true) {\n      const naturalAspect = naturalWidth / naturalHeight;\n      if (naturalAspect > aspect) {\n        y = 0;\n        height = imgHeight;\n        width = height * aspect;\n        x = (imgWidth - width) / 2;\n      } else {\n        x = 0;\n        width = imgWidth;\n        height = width / aspect;\n        y = (imgHeight - height) / 2;\n      }\n    } else {\n      x = (imgWidth - cropWidth) / 2;\n      y = (imgHeight - cropHeight) / 2;\n      width = cropWidth;\n      height = cropHeight;\n    }\n\n    this.setState({ cropData: { unit: \"px\", aspect, x, y, width, height } });\n    return false;\n  };\n\n  render() {\n    const { filters } = this;\n    const {\n      previewVisible,\n      previewImage,\n      //\n      fileList = [],\n      showButton = true,\n      //\n      cropModalVisible,\n      cropImageSrc,\n      cropData\n    } = this.state;\n    const {\n      children,\n      max = 0,\n      filter,\n      onChange,\n      beforeUpload,\n      onRemove,\n      // crop\n      multiple,\n      enCrop = false,\n      cropModalTitle,\n      cropModalWidth,\n      cropResize,\n      cropResizeAndDrag,\n      enDrag = false,\n      ...uploadProp\n    } = this.props;\n\n    let UploadComponent = enDrag ? Dragger : Upload;\n    return (\n      <Fragment>\n        <UploadComponent\n          ref={this.uploadRef}\n          fileList={fileList}\n          multiple={enCrop === true ? false : multiple}\n          onChange={({ fileList }) => {\n            let needShowButton = true\n            if (max === 0 || fileList.length < max) {\n              needShowButton = true;\n            } else {\n              needShowButton = false;\n            }\n            if (max !== 0) {\n              fileList.splice(max);\n            }\n\n            onChange && onChange(fileList);\n            this.setState({\n              fileList: fileList,\n              showButton: needShowButton\n            });\n          }}\n          beforeUpload={(file, fileList) => {\n            this.imageCount++;\n            let tasks = [];\n            for (let i = 0, len = filters.length; i < len; i++) {\n              let f = filters[i];\n              let r = f.fn([file]);\n\n              if (r instanceof Promise) {\n                tasks.push(r);\n              } else if (!!r === false) {\n                tasks.push(Promise.reject());\n              } else {\n                tasks.push(Promise.resolve());\n              }\n            }\n\n            return new Promise((resolve, reject) => {\n              this.resolve = resolve;\n              this.reject = reject;\n              Promise.all(tasks).then(() => {\n                // 进行剪切控制\n                const { enCrop = false } = this.props;\n                if (enCrop) {\n                  this.originalFile = file;\n                  // 读取添加的图片\n                  const reader = new FileReader();\n                  reader.addEventListener(\"load\", () => {\n                    this.setState({\n                      cropModalVisible: true,\n                      cropImageSrc: reader.result\n                    });\n                  });\n                  reader.readAsDataURL(this.originalFile);\n                } else {\n                  resolve(file);\n                }\n              });\n            });\n          }}\n          onRemove={file => {\n            this.imageCount--;\n            onChange && onChange(this.state.fileList);\n            return true;\n          }}\n          onPreview={this.handlePreview}\n          {...uploadProp}\n        >\n          {(max == 0 || fileList.length < max) && children}\n        </UploadComponent>\n        <Modal\n          visible={cropModalVisible}\n          width={cropModalWidth}\n          onOk={this.onCropOk}\n          onCancel={this.onCropClose}\n          wrapClassName=\"antd-img-crop-modal\"\n          title={cropModalTitle || \"编辑图片\"}\n          maskClosable={false}\n          destroyOnClose\n        >\n          {cropImageSrc && (\n            <ReactCrop\n              src={cropImageSrc}\n              crop={cropData}\n              locked={cropResize === false}\n              disabled={cropResizeAndDrag === false}\n              onImageLoaded={this.onCropImageLoaded}\n              onChange={this.onCropChange}\n              keepSelection\n            />\n          )}\n        </Modal>\n        <Modal\n          visible={previewVisible}\n          footer={null}\n          onCancel={this.handleCancelPreview}\n        >\n          <img alt=\"预览图片\" style={{ width: \"100%\" }} src={previewImage} />\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nUploader.propTypes = {\n  //\n  fileType: PropTypes.string,\n  size: PropTypes.number,\n  max: PropTypes.number,\n  minWidth: PropTypes.number,\n  minHeight: PropTypes.number,\n  maxWidth: PropTypes.number,\n  maxHeight: PropTypes.number,\n  enCrop: PropTypes.bool,\n  enDrag: PropTypes.bool,\n  filter: PropTypes.array,\n\n  //crop\n  cropWidth: PropTypes.number,\n  cropHeight: PropTypes.number,\n  useRatio: PropTypes.bool,\n  cropResize: PropTypes.bool,\n  cropResizeAndDrag: PropTypes.bool,\n\n  cropModalTitle: PropTypes.string,\n  cropModalWidth: PropTypes.number,\n  beforeCrop: PropTypes.func,\n\n  children: PropTypes.node\n};\n\nUploader.defaultProps = {\n  //\n  fileType: \"\",\n  size: 0,\n  max: 0,\n  minWidth: 0,\n  minHeight: 0,\n  maxWidth: 0,\n  maxHeight: 0,\n  enCrop: false,\n  enDrag: false,\n  filter: [],\n  // crop\n  cropWidth: 100,\n  cropHeight: 100,\n  useRatio: false,\n  cropResize: true,\n  cropResizeAndDrag: true,\n\n  cropModalTitle: \"图片裁剪\",\n  cropModalWidth: 520\n};\n"],"names":["style","File","e","Dragger","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","Uploader","props","state","value","uploadRef","React","createRef","imageCount","filters","fileType","fileTypeErrorTip","push","length","types","split","filterFiles","fileList","filter","indexOf","f","type","enCrop","size","sizeErrorTip","minWidth","minHeight","maxWidth","maxHeight","whErrorTip","filereader","src","target","image","Image","naturalWidth","naturalHeight","nextProps","setState","previewVisible","previewImage","showButton","cropModalVisible","cropImageSrc","cropData","children","max","onChange","beforeUpload","onRemove","multiple","cropModalTitle","cropModalWidth","cropResize","cropResizeAndDrag","enDrag","uploadProp","UploadComponent","needShowButton","splice","tasks","i","len","r","fn","all","then","originalFile","addEventListener","handlePreview","onCropOk","onCropClose","onCropImageLoaded","onCropChange","handleCancelPreview","width","Component","url","preview","originFileObj","x","y","height","onClose","scale","undefined","document","createElement","canvas","getContext","drawImage","imageRef","name","uid","toBlob","blob","Date","now","croppedFile","response","Object","prototype","toString","call","croppedProcessedFile","useProcessedFile","imgWidth","imgHeight","cropWidth","cropHeight","useRatio","modalBodyWidth","aspect","naturalAspect","unit","propTypes","PropTypes","string","number","bool","array","func","node","defaultProps"],"mappings":"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"}